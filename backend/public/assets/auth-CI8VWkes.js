import{r as m,u as j,j as e,B as u,b as N}from"./index-28yYTQYt.js";import{C as f,a as w,b,c as P,d as F}from"./card-Da7qCGoe.js";import{L as i,I as d,a as y}from"./loading-button-BkylZ5sb.js";import{A as v,a as C}from"./alert-D6SHa7up.js";const A=({onSuccess:s,onSwitchToRegister:r})=>{const[a,h]=m.useState({username:"",password:""}),[c,t]=m.useState(null),{login:x,isLoading:p}=j(),g=async n=>{if(n.preventDefault(),t(null),!a.username||!a.password){t("Please fill in all fields");return}try{await x(a),s==null||s()}catch(o){t(o.message||"Login failed")}},l=n=>{h(o=>({...o,[n.target.name]:n.target.value}))};return e.jsx(e.Fragment,{children:e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[c&&e.jsx(v,{variant:"destructive",children:e.jsx(C,{children:c})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"username",children:"Username or Email"}),e.jsx(d,{id:"username",name:"username",type:"text",value:a.username,onChange:l,placeholder:"Enter your username or email",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"password",children:"Password"}),e.jsx(d,{id:"password",name:"password",type:"password",value:a.password,onChange:l,placeholder:"Enter your password",required:!0})]}),e.jsx(y,{type:"submit",loading:p,className:"w-full",children:"Login"}),r&&e.jsx("div",{className:"text-center",children:e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Don't have an account?"," ",e.jsx(u,{type:"button",variant:"link",className:"p-0 h-auto font-normal",onClick:r,children:"Sign up"})]})})]})})},D=({onSuccess:s,onSwitchToLogin:r})=>{const[a,h]=m.useState({username:"",email:"",password:"",confirmPassword:""}),[c,t]=m.useState(null),{register:x,isLoading:p}=j(),g=async n=>{if(n.preventDefault(),t(null),!a.username||!a.email||!a.password||!a.confirmPassword){t("Please fill in all fields");return}if(a.password!==a.confirmPassword){t("Passwords do not match");return}if(a.password.length<6){t("Password must be at least 6 characters long");return}try{await x({username:a.username,email:a.email,password:a.password}),s==null||s()}catch(o){t(o.message||"Registration failed")}},l=n=>{h(o=>({...o,[n.target.name]:n.target.value}))};return e.jsx(e.Fragment,{children:e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[c&&e.jsx(v,{variant:"destructive",children:e.jsx(C,{children:c})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"username",children:"Username"}),e.jsx(d,{id:"username",name:"username",type:"text",value:a.username,onChange:l,placeholder:"Choose a username",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"email",children:"Email"}),e.jsx(d,{id:"email",name:"email",type:"email",value:a.email,onChange:l,placeholder:"Enter your email",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"password",children:"Password"}),e.jsx(d,{id:"password",name:"password",type:"password",value:a.password,onChange:l,placeholder:"Create a password (min 6 characters)",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsx(d,{id:"confirmPassword",name:"confirmPassword",type:"password",value:a.confirmPassword,onChange:l,placeholder:"Confirm your password",required:!0})]}),e.jsx(y,{type:"submit",loading:p,className:"w-full",children:"Create Account"}),r&&e.jsx("div",{className:"text-center",children:e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Already have an account?"," ",e.jsx(u,{type:"button",variant:"link",className:"p-0 h-auto font-normal",onClick:r,children:"Login"})]})})]})})};function E(){const[s,r]=m.useState("login");return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-accent p-2 rounded-lg flex justify-center space-x-4",children:[e.jsx(u,{onClick:()=>r("login"),className:N(s==="login"?"bg-blue-600 text-white grow":"bg-gray-200 text-gray-700"),children:"Login"}),e.jsx(u,{onClick:()=>r("register"),className:s==="register"?"bg-blue-600 text-white grow":"bg-gray-200 text-gray-700",children:"Register"})]}),s==="login"&&e.jsx(A,{}),s==="register"&&e.jsx(D,{})]})}const B=function(){const{isAuthenticated:r}=j();return r?e.jsx(f,{children:e.jsxs(w,{className:"flex flex-col gap-4",children:[e.jsx("p",{className:"text-center",children:"You are already logged in."}),e.jsx(u,{onClick:()=>window.location.href="/",className:"w-full bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700",children:"Go to Gallery"})]})}):e.jsxs(f,{className:"w-full max-w-md mx-auto mt-10",children:[e.jsxs(b,{children:[e.jsx(P,{children:"Vacation Gallery Authentication"}),e.jsx(F,{children:"Please login or register to access your vacation photos."})]}),e.jsx(w,{className:"flex flex-col gap-4",children:e.jsx(E,{})})]})};export{B as component};

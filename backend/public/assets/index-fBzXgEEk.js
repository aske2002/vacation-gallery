import{j as a,B as g,p as v,r as N,D as C}from"./index-28yYTQYt.js";import{D,a as S,d as w,b as I,e as T,f as E,g as P}from"./date-input-67k-hZ35.js";import{u as F,b as A}from"./index.esm-Bnp_jBhY.js";import{B as O,D as _,E as M,I as k,N as R,O as B,P as L,Z as x,a as U,b as z,c as V,d as K,e as q,f as H,g as J,h as Y,i as G,j,k as W,l as $,m as Q,n as X,o as aa,p as ea,q as sa,r as oa,s as na,t as ta,u as ra,v as ia,w as la,x as da,y as ca,z as pa,A as ma,C as ua,F as xa,G as ga,H as ya,J as Ta,K as ja,L as ha,M as fa,Q as ba,R as Za,S as va,T as Na,U as Ca,V as Da,W as Sa,X as wa,Y as Ia,_ as Ea,$ as Pa,a0 as Fa,a1 as Aa,a2 as Oa,a3 as _a,a4 as Ma,a5 as h,a6 as ka,a7 as Ra,a8 as Ba,a9 as La,aa as Ua,ab as za,ac as Va,ad as Ka,ae as qa,af as Ha,ag as Ja,ah as Ya,ai as Ga,aj as Wa,ak as $a,al as Qa,am as Xa,an as ae,ao as ee,ap as se,aq as oe,ar as ne,as as te,at as re,au as ie,av as le,aw as de,ax as ce,ay as pe,az as me,aA as ue,aB as xe,aC as ge,aD as ye,aE as Te,aF as je,aG as he,aH as fe,aI as be,aJ as Ze,aK as ve,aL as Ne,aM as Ce,aN as De}from"./types-BJIYILio.js";import{F as Se,a as d,b as c,c as p,d as f,e as m}from"./form-DdwsN0VQ.js";import{I as we,a as b}from"./loading-button-BkylZ5sb.js";import{c as Ie,b as Ee,d as Pe}from"./useVacationGalleryApi-CYdJb4Ya.js";import{C as Fe,a as Ae,c as Oe,e as _e}from"./card-Da7qCGoe.js";import{P as Me}from"./plus-CX1HuEan.js";import"./useQuery-fXf16oON.js";const i=Object.freeze(Object.defineProperty({__proto__:null,BRAND:O,DIRTY:_,EMPTY_PATH:M,INVALID:k,NEVER:R,OK:B,ParseStatus:L,Schema:x,ZodAny:U,ZodArray:z,ZodBigInt:V,ZodBoolean:K,ZodBranded:q,ZodCatch:H,ZodDate:J,ZodDefault:Y,ZodDiscriminatedUnion:G,ZodEffects:j,ZodEnum:W,ZodError:$,get ZodFirstPartyTypeKind(){return Q},ZodFunction:X,ZodIntersection:aa,ZodIssueCode:ea,ZodLazy:sa,ZodLiteral:oa,ZodMap:na,ZodNaN:ta,ZodNativeEnum:ra,ZodNever:ia,ZodNull:la,ZodNullable:da,ZodNumber:ca,ZodObject:pa,ZodOptional:ma,ZodParsedType:ua,ZodPipeline:xa,ZodPromise:ga,ZodReadonly:ya,ZodRecord:Ta,ZodSchema:x,ZodSet:ja,ZodString:ha,ZodSymbol:fa,ZodTransformer:j,ZodTuple:ba,ZodType:x,ZodUndefined:Za,ZodUnion:va,ZodUnknown:Na,ZodVoid:Ca,addIssueToContext:Da,any:Sa,array:wa,bigint:Ia,boolean:Ea,coerce:Pa,custom:Fa,date:Aa,datetimeRegex:Oa,defaultErrorMap:_a,discriminatedUnion:Ma,effect:h,enum:ka,function:Ra,getErrorMap:Ba,getParsedType:La,instanceof:Ua,intersection:za,isAborted:Va,isAsync:Ka,isDirty:qa,isValid:Ha,late:Ja,lazy:Ya,literal:Ga,makeIssue:Wa,map:$a,nan:Qa,nativeEnum:Xa,never:ae,null:ee,nullable:se,number:oe,object:ne,get objectUtil(){return te},oboolean:re,onumber:ie,optional:le,ostring:de,pipeline:ce,preprocess:pe,promise:me,quotelessJson:ue,record:xe,set:ge,setErrorMap:ye,strictObject:Te,string:je,symbol:he,transformer:h,tuple:fe,undefined:be,union:Ze,unknown:ve,get util(){return Ne},void:Ce},Symbol.toStringTag,{value:"Module"})),ke=i.object({name:i.string(),description:i.string().optional(),start_date:i.string(),end_date:i.string().optional()});function Re({open:y,onClose:r,onCreated:n}){const s=F({resolver:De(ke),defaultValues:{name:"",description:"",start_date:new Date().toISOString(),end_date:void 0}}),{mutateAsync:u}=Ie(),l=async e=>{await u(e),n==null||n(e.name),r()};return a.jsx(D,{open:y,onOpenChange:r,children:a.jsx(S,{children:a.jsx(Se,{...s,children:a.jsxs("form",{onSubmit:s.handleSubmit(l),className:"space-y-8",children:[a.jsx(w,{children:a.jsx(I,{children:"Create New Trip"})}),a.jsx(d,{control:s.control,name:"name",render:({field:e})=>a.jsxs(c,{children:[a.jsx(p,{children:"Trip Name"}),a.jsx(f,{children:a.jsx(we,{...e,className:"input",placeholder:"Enter trip name"})}),a.jsx(m,{})]})}),a.jsx(d,{control:s.control,name:"description",render:({field:e})=>a.jsxs(c,{children:[a.jsx(p,{children:"Description"}),a.jsx(f,{children:a.jsx(A,{...e,className:"input",placeholder:"Enter trip description"})}),a.jsx(m,{})]})}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(d,{control:s.control,name:"start_date",render:({field:e})=>a.jsxs(c,{className:"flex flex-col",children:[a.jsx(p,{children:"Start Date"}),a.jsx(T,{value:e.value?new Date(e.value):void 0,onChange:o=>e.onChange(o==null?void 0:o.toISOString()),className:"grow w-full"}),a.jsx(m,{})]})}),a.jsx(d,{control:s.control,name:"end_date",render:({field:e})=>a.jsxs(c,{className:"flex flex-col",children:[a.jsx(p,{children:"End Date"}),a.jsx(T,{value:e.value?new Date(e.value):void 0,onChange:o=>e.onChange(o==null?void 0:o.toISOString()),className:"grow w-full"}),a.jsx(m,{})]})})]}),a.jsxs(E,{children:[a.jsx(P,{asChild:!0,children:a.jsx(g,{variant:"outline",onClick:r,children:"Cancel"})}),a.jsx(b,{type:"submit",loading:s.formState.isSubmitting,className:"bg-blue-600 text-white hover:bg-blue-700",children:"Create Trip"})]})]})})})})}const Ge=function(){const r=v(),{data:n,isLoading:s}=Ee(),[u,l]=N.useState(!1),{mutateAsync:e,isPending:o,variables:Z}=Pe();return a.jsxs("div",{className:"grow w-full flex flex-col gap-4",children:[a.jsx(Re,{open:u,onClose:()=>l(!1)}),a.jsxs("div",{className:"flex gap-4",children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Trips"}),a.jsx(g,{size:"icon",onClick:()=>l(!0),className:"rounded-full bg-blue-600 text-white hover:bg-blue-700",children:a.jsx(Me,{className:"h-2 w-2"})})]}),s&&a.jsx("div",{className:"grow flex justify-center items-center",children:a.jsx(C,{})}),!s&&a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n==null?void 0:n.map(t=>a.jsx(Fe,{children:a.jsxs(Ae,{children:[a.jsx(Oe,{children:t.name}),a.jsx("p",{className:"text-sm text-muted-foreground",children:t.description||"No description available"}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Photos: ",t.photoCount]}),a.jsxs(_e,{children:[a.jsx(g,{variant:"outline",className:"mr-2",onClick:()=>{r({to:"/admin/$tripId",params:{tripId:t.id.toString()}})},children:"View Trip"}),a.jsx(b,{variant:"destructive",loading:o&&Z===t.id,onClick:()=>{window.confirm("Are you sure you want to delete this trip? This action cannot be undone.")&&e(t.id)},children:"Delete"})]})]})},t.id))})]})};export{Ge as component};

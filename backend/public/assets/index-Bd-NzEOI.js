import{p as m,j as t,r as i}from"./index-28yYTQYt.js";import{b as u,u as p}from"./useVacationGalleryApi-CYdJb4Ya.js";import{C as x,a as h,c as f}from"./card-Da7qCGoe.js";import"./useQuery-fXf16oON.js";function g(o){return o.toUpperCase().replace(/./g,a=>String.fromCodePoint(127397+a.charCodeAt(0)))}function j({trip:o,onClick:a}){const{data:s}=p(o.id),n=i.useMemo(()=>s?Array.from(new Map(s.all.map(e=>e.location.country&&e.location.countryCode?[e.location.countryCode,e.location.country]:void 0).filter(e=>!!e))).map(e=>({code:e[0],name:e[1]})):[],[o]),r=i.useMemo(()=>{if(!s||s.all.length===0)return[];const e=s.sortByKey("time").all,l=Math.min(10,e.length);if(l===e.length)return e;const c=(e.length-1)/(l-1);return Array.from({length:l},(v,d)=>e[Math.round(d*c)])},[s]);return t.jsx(x,{onClick:()=>a==null?void 0:a(o),className:"cursor-pointer hover:bg-neutral-800 transition-all",children:t.jsxs(h,{className:"flex gap-4",children:[t.jsxs("div",{className:"flex-col justify-start",children:[t.jsx(f,{children:o.name}),t.jsx("p",{className:"text-sm text-muted-foreground",children:o.description||"No description available"}),t.jsx("div",{className:"flex gap-2 text-2xl",children:n.map(e=>t.jsx("p",{className:"hover:scale-110 transition-all",children:g(e.code)}))})]}),t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsx("div",{className:"flex gap-2",children:r.map(e=>t.jsx(N,{photo:e},e.id))}),t.jsxs("p",{className:"text-sm text-muted-foreground",children:[o.photoCount," photos in total"]})]})]})},o.id)}function N({photo:o}){return t.jsx("img",{src:o.thumbnailUrl,alt:o.description||"Trip photo",className:"w-16 h-16 object-cover rounded"})}const M=function(){const{data:a,isLoading:s}=u(),n=m();return t.jsx("div",{className:"flex-1 w-full flex flex-col gap-4",children:a&&a.map(r=>t.jsx(j,{trip:r,onClick:e=>n({to:"/$tripId",params:{tripId:e.id}})},r.id))})};export{M as component};
